<div class="property-detail-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>İlan yükleniyor...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <div class="error-icon">❌</div>
    <h2>İlan Bulunamadı</h2>
    <p>Aradığınız ilan bulunamadı veya kaldırılmış olabilir.</p>
    <button class="btn btn-primary" (click)="goBack()">Ana Sayfaya Dön</button>
  </div>
  <!-- Property Detail -->
  <div *ngIf="!loading && !error && property" class="property-detail">
    <ng-container>
      <!-- Header -->
      <div class="property-header">
        <button class="back-btn" type="button"  (click)="goBack()">← Geri</button>
        <div class="property-actions">
          <button class="action-btn" (click)="onShareProperty(property)" title="Paylaş">
            📤
          </button>
          <button 
            class="action-btn" 
            (click)="onAddToFavorites(property)" 
            title="Favorilere Ekle"
            *ngIf="isAuthenticated()"
          >
            ♥
          </button>
        </div>
      </div>

      <!-- Property Images -->
      <div class="property-images">
        <div class="main-image">
          <div class="image-placeholder">
            <span>Ana Fotoğraf</span>
          </div>
        </div>
        <div class="thumbnail-images" *ngIf="property.images && property.images.length > 1">
          <div class="thumbnail" *ngFor="let image of property.images.slice(0, 4)">
            <div class="thumbnail-placeholder">
              <span>Fotoğraf</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Property Info -->
      <div class="property-info">
        <div class="main-info">
          <!-- Title and Price -->
          <div class="title-section">
            <h1 class="property-title">{{ property.title }}</h1>
            <div class="property-price">{{ formatPrice(property.price, property.priceType) }}</div>
          </div>

          <!-- Location -->
          <div class="location-section">
            <div class="location">
              📍 {{ property.address.street }}, {{ property.address.district }}, {{ property.address.city }}
            </div>
            <div class="property-type">
              🏠 {{ getPropertyTypeLabel(property.propertyType) }}
            </div>
          </div>

          <!-- Description -->
          <div class="description-section">
            <h3>Açıklama</h3>
            <p>{{ property.description }}</p>
          </div>

          <!-- Property Details -->
          <div class="details-section">
            <h3>Emlak Detayları</h3>
            <div class="details-grid">
              <div class="detail-item" *ngIf="property.details?.rooms">
                <span class="detail-label">Oda Sayısı:</span>
                <span class="detail-value">{{ property.details.rooms }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.bedrooms">
                <span class="detail-label">Yatak Odası:</span>
                <span class="detail-value">{{ property.details.bedrooms }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.bathrooms">
                <span class="detail-label">Banyo:</span>
                <span class="detail-value">{{ property.details.bathrooms }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.area">
                <span class="detail-label">Metrekare:</span>
                <span class="detail-value">{{ property.details.area }} m²</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.floor">
                <span class="detail-label">Kat:</span>
                <span class="detail-value">{{ property.details.floor }}/{{ property.details.totalFloors }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.buildYear">
                <span class="detail-label">Yapım Yılı:</span>
                <span class="detail-value">{{ property.details.buildYear }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.heating">
                <span class="detail-label">Isıtma:</span>
                <span class="detail-value">{{ getHeatingTypeLabel(property.details.heating) }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.elevator">
                <span class="detail-label">Asansör:</span>
                <span class="detail-value">{{ property.details.elevator ? 'Var' : 'Yok' }}</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.parkingSpaces">
                <span class="detail-label">Otopark:</span>
                <span class="detail-value">{{ property.details.parkingSpaces }} Araç</span>
              </div>
              <div class="detail-item" *ngIf="property.details?.furnished">
                <span class="detail-label">Eşyalı:</span>
                <span class="detail-value">{{ property.details.furnished ? 'Evet' : 'Hayır' }}</span>
              </div>
            </div>
          </div>

          <!-- Property Features -->
          <div class="features-section" *ngIf="property.features && property.features.length > 0">
            <h3>Özellikler</h3>
            <div class="features-grid">
              <div class="feature-item" *ngFor="let feature of property.features">
                <span class="feature-icon">
                  <span *ngIf="feature.category === 'comfort'">🏠</span>
                  <span *ngIf="feature.category === 'security'">🔒</span>
                  <span *ngIf="feature.category === 'location'">📍</span>
                  <span *ngIf="feature.category === 'building'">🏢</span>
                </span>
                <span class="feature-name">{{ feature.name }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Contact Card -->
          <div class="contact-card">
            <h3>İletişim</h3>
            <div class="owner-info">
              <div class="owner-name">
                {{ property.owner.firstName }} {{ property.owner.lastName }}
              </div>
              <div class="owner-type">Emlak Sahibi</div>
            </div>
            <button 
              class="contact-btn" 
              (click)="onContactOwner(property)"
            >
              İletişime Geç
            </button>
          </div>

          <!-- Property Stats -->
          <div class="stats-card">
            <h3>İstatistikler</h3>
            <div class="stat-item">
              <span class="stat-label">Görüntülenme:</span>
              <span class="stat-value">{{ property.statistics.viewCount }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Favori:</span>
              <span class="stat-value">{{ property.statistics.favoriteCount }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">İletişim:</span>
              <span class="stat-value">{{ property.statistics.contactCount }}</span>
            </div>
          </div>

          <!-- Property Meta -->
          <div class="meta-card">
            <div class="meta-item">
              <span class="meta-label">İlan Tarihi:</span>
              <span class="meta-value">{{ formatDate(property.createdAt) }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Son Güncelleme:</span>
              <span class="meta-value">{{ formatDate(property.updatedAt) }}</span>
            </div>
            <div class="meta-item" *ngIf="property.isVip">
              <span class="meta-badge vip">VIP İlan</span>
            </div>
            <div class="meta-item" *ngIf="property.isFeatured">
              <span class="meta-badge featured">Öne Çıkan</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Property Map -->
      <app-property-map [property]="property"></app-property-map>
    </ng-container>
  </div>

  <app-footer-component></app-footer-component>
</div>
